<section
  class="bg-emerald-200 flex flex-col rounded-xl w-1/2 mx-auto p-4 my-30"
>
  <h2>Login</h2>
  <form [formGroup]="logInForm" (ngSubmit)="logIn()" class="flex flex-col">
    <label for="email" class="mb-2 text-sm font-medium text-gray-900"
      >Email</label
    >
    <input
      type="email"
      id="email"
      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5 mb-2"
      placeholder=""
      formControlName="email"
      required
    />

    <!--  -->
    @if (logInForm.get('email')?.errors && logInForm.get('email')?.dirty) {
    <div
      class="flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50"
      role="alert"
    >
      <div>
        <ul class="mt-1.5 list-disc list-inside">
          @if (logInForm.get('email')?.getError('required')) {
          <li>Email is Reqired</li>
          } @if (logInForm.get('email')?.getError('email')) {
          <li>Please enter correct email format</li>
          }
        </ul>
      </div>
    </div>
    }

    <!--  -->

    <label for="password" class="mb-2 text-sm font-medium text-gray-900"
      >Password</label
    >
    <input
      type="password"
      id="password"
      formControlName="password"
      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5 mb-2"
      placeholder=""
      required
    />

    <!--  -->
    @if (logInForm.get('password')?.getError('required') &&
    logInForm.get('password')?.dirty){
    <div
      class="flex p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50"
      role="alert"
    >
      <div>
        <ul class="mt-1.5 list-disc list-inside">
          <li>Password is Reqired</li>
        </ul>
      </div>
    </div>
    }

    <p
      class="underline text-green-800 text-lg cursor-pointer"
      routerLink="/forgot-password"
    >
      Forgot Password?
    </p>

    <!--  -->

    @if(responseErrorMsg){
    <div
      class="flex items-center justify-center p-4 mb-4 text-sm text-red-800 border border-red-300 rounded-lg bg-red-50"
      role="alert"
    >
      <div>
        <p class="font-medium">
          {{ responseErrorMsg }}
        </p>
      </div>
    </div>
    } @if(res){
    <div
      class="flex items-center justify-center p-4 mb-4 text-sm text-green-800 border border-green-300 rounded-lg bg-green-50 transition-all"
      role="alert"
    >
      <div>
        <p class="font-medium">Welcome</p>
      </div>
    </div>
    }

    <button
      type="submit"
      [disabled]="isLoading"
      class="disabled:bg-gray-500 focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 w-full mt-2"
    >
      Log In @if(isLoading==true){
      <i class="fa-solid fa-spinner fa-spin ms-2"></i>
      }
    </button>
  </form>
</section>
